[
  {
    "path": "posts/2021-03-17-homogeneitytestinr/",
    "title": "Homogeneity test in R",
    "description": "first before going to do ANOVA",
    "author": [
      {
        "name": "Sith Jaisong",
        "url": {}
      }
    ],
    "date": "2021-03-16",
    "categories": [
      "Rstat"
    ],
    "contents": "\r\n\r\nContents\r\nทำไมต้องวิเคราะห์\r\nF-test\r\nBartlett’s test\r\nLevene’s test\r\nFligner-Killeen’s test\r\n\r\n\r\nทำไมต้องวิเคราะห์\r\nก่อนที่เราจะทำการวิเคราะห์ ANOVA เราจะต้องตรวจ ว่า assumption ของ ANOVA นั้น ผ่านหรือไม่ เมื่อเราต้องการเปรียบเทียบ กลุ่มตัวอย่าง 2 กลุ่ม หรือ มากกว่า ว่ามีค่าเฉลี่ยแตกต่างกันหรือไม่ทางสถิติ (ผมไม่ได้เป็นนักสถิติจริงจัง ผมเอาแค่ใช้งาน ดังนั้นต่อไปนี้อ่านไว้เฉยๆ อย่าไปอางอิงอะไรนะครับ)\r\nความแปรปรวนต้องไม่แตกต่างกันอย่างมีนัยทางสถิติ นั้นก็คือ ไอ้เขาสองลูกนี้ ควรจะไม่แตกต่างกันมากนัก ถึงจะเอามาเปรียบเทียบกันได้ จริงไหม แล้วจะรู้ได้อย่างไร สมมุติ มี การทดลอง ชื่อ F10 กับ F50 วัดผลออกมาดังนี้ ผมเอาตัวอย่างข้อมูลจากหนังสือชื่อ สถิติ:การวางแผนการทดลองและการวิเคราะห์ข้อมูลในงานวิจัยด้านพืชด้วย R ของ ชูศักดิ์ จอมพุก\r\n\r\n\r\nF10 <- c(605, 583, 592, 602, 587, 595, 615, 612, 606)\r\nF50 <- c(779, 780, 797, 779, 778, 801, 785, 779, 771)\r\ntest_data <- data.frame(F10, F50)\r\n\r\n\r\n\r\nแล้วจะได้รูปแบบของข้อมูลแบบนี้มา\r\n\r\n\r\ntest_data\r\n\r\n\r\n  F10 F50\r\n1 605 779\r\n2 583 780\r\n3 592 797\r\n4 602 779\r\n5 587 778\r\n6 595 801\r\n7 615 785\r\n8 612 779\r\n9 606 771\r\n\r\nบอกเลยว่า มันไม่ใช่โครงสร้างที่เราจะเหมาะจะมาวิเคราะห์ เลย หรือเอามาทำอะไรต่อ วิธีการ โดยการขอใช้ gather() จาก tidyverse package\r\n\r\n\r\nlibrary(tidyverse)\r\ntidy_data <- test_data %>% gather(key = \"trt\", value = \"yield\")\r\ntidy_data\r\n\r\n\r\n   trt yield\r\n1  F10   605\r\n2  F10   583\r\n3  F10   592\r\n4  F10   602\r\n5  F10   587\r\n6  F10   595\r\n7  F10   615\r\n8  F10   612\r\n9  F10   606\r\n10 F50   779\r\n11 F50   780\r\n12 F50   797\r\n13 F50   779\r\n14 F50   778\r\n15 F50   801\r\n16 F50   785\r\n17 F50   779\r\n18 F50   771\r\n\r\nแบบนี้มันถึงจะไปต่อแล้วรู้เรื่องการเชคความแปรปรวนนั้นมีหลายวิธี\r\nF-test\r\nทดสอบได้แค่ 2 กลุ่ม เท่านั้น\r\n\r\n\r\nvar.test(yield ~ trt, data = tidy_data)\r\n\r\n\r\n\r\n    F test to compare two variances\r\n\r\ndata:  yield by trt\r\nF = 1.3074, num df = 8, denom df = 8, p-value = 0.7137\r\nalternative hypothesis: true ratio of variances is not equal to 1\r\n95 percent confidence interval:\r\n 0.2949165 5.7962277\r\nsample estimates:\r\nratio of variances \r\n          1.307441 \r\n\r\nBartlett’s test\r\nอันนี้ แนะนำ ถ้านึกอะไรไม่ออก ให้นึกถึงอันนี้เลย โดยทั่วไปก็ใช้อันนี้กัน\r\n\r\n\r\nbartlett.test(yield ~ trt, data = tidy_data)\r\n\r\n\r\n\r\n    Bartlett test of homogeneity of variances\r\n\r\ndata:  yield by trt\r\nBartlett's K-squared = 0.13487, df = 1, p-value = 0.7134\r\n\r\nเห็นไหมว่าผลมันก็ใกล้เคียงกัน\r\nLevene’s test\r\nอันนี้ใช้ใน SPSS ใน R ก็จะมีใน car package\r\n\r\n\r\nlibrary(car)\r\nleveneTest(yield ~ trt, data = tidy_data)\r\n\r\n\r\nLevene's Test for Homogeneity of Variance (center = median)\r\n      Df F value Pr(>F)\r\ngroup  1  0.6448 0.4337\r\n      16               \r\n\r\np มันจะต่างออก แต่ก็ไม่ต่างกันซะทีเดียว\r\nFligner-Killeen’s test\r\nวิธีนี้ ค่อนข้างจะ robust กว่าวิธีอื่นๆ ถึงแม้ว่าจะมีการกระจายไม่ค่อยจะ normal เท่าไหร่\r\n\r\n\r\nfligner.test(yield ~ trt, data = tidy_data)\r\n\r\n\r\n\r\n    Fligner-Killeen test of homogeneity of variances\r\n\r\ndata:  yield by trt\r\nFligner-Killeen:med chi-squared = 0.61691, df = 1, p-value =\r\n0.4322\r\n\r\nส่วนตัวไม่ติด ว่าจะใช้วิธีไหน แต่ขอให้บอกว่า ใช้อะไรทดสอบก็ พอ จำไว้ว่าถ้า Homogeneity of Variance ไม่ผ่านแล้ว assumption ของ parametric test ก็ไม่ผ่านเช่นกัน อาจจะต้องหันไปใช้วิธี Nonparametric test แทน\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-17-homogeneitytestinr/images/homogeneous-cartoon.jpg",
    "last_modified": "2021-03-17T17:16:17+07:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-17-EDAinR/",
    "title": "EDA in R",
    "description": "Let look at EDA in R",
    "author": [
      {
        "name": "Sith Jaisong",
        "url": {}
      }
    ],
    "date": "2021-03-16",
    "categories": [
      "Rstat"
    ],
    "contents": "\r\n\r\nContents\r\n{package} ใน R ที่ใช้เพื่อทำ EDA\r\n{skimr} package\r\n{DataExplorer} package\r\n{inspectdf} package\r\n\r\n\r\n\r\n\r\nlibrary(tidyverse)\r\ndata(\"chickwts\")\r\nglimpse(chickwts)\r\n\r\n\r\nRows: 71\r\nColumns: 2\r\n$ weight <dbl> 179, 160, 136, 227, 217, 168, 108, 124, 143, 140, 309~\r\n$ feed   <fct> horsebean, horsebean, horsebean, horsebean, horsebean~\r\n\r\n{package} ใน R ที่ใช้เพื่อทำ EDA\r\nปกติเวลาเราทำงานกับข้อมูลเราควรดูว่าข้อมูลที่เรากำลังทำอยู่เป็นอย่างไรก่อนวิเคราะห์ ไม่ใช่ว่า เอ้ย ทำเสร็จแล้ว วิเคราะห์เลย เราควรจะต้องมาดูว่า มันเป็นอย่างไรบ้าง การกระจายเป็นอย่างไรบ้าง มีความสัมพันธ์กันบ้างไหม\r\n{skimr} package\r\n\r\n\r\nlibrary(skimr)\r\nskim(chickwts)\r\n\r\n\r\nTable 1: Data summary\r\nName\r\nchickwts\r\nNumber of rows\r\n71\r\nNumber of columns\r\n2\r\n_______________________\r\n\r\nColumn type frequency:\r\n\r\nfactor\r\n1\r\nnumeric\r\n1\r\n________________________\r\n\r\nGroup variables\r\nNone\r\nVariable type: factor\r\nskim_variable\r\nn_missing\r\ncomplete_rate\r\nordered\r\nn_unique\r\ntop_counts\r\nfeed\r\n0\r\n1\r\nFALSE\r\n6\r\nsoy: 14, cas: 12, lin: 12, sun: 12\r\nVariable type: numeric\r\nskim_variable\r\nn_missing\r\ncomplete_rate\r\nmean\r\nsd\r\np0\r\np25\r\np50\r\np75\r\np100\r\nhist\r\nweight\r\n0\r\n1\r\n261.31\r\n78.07\r\n108\r\n204.5\r\n258\r\n323.5\r\n423\r\n▆▆▇▇▃\r\n\r\nฟังชั่นนี้ เราจะเห็น histogram ของ interval data แถมยังบอก sd percentile ที่ต่างๆ 0 25 50 75 100 ด้วย\r\n{DataExplorer} package\r\n\r\n\r\nlibrary(DataExplorer)\r\nplot_bar(diamonds, by = \"cut\", by_position = \"dodge\")\r\n\r\n\r\n\r\n\r\nอันนี้ก็ รีพอร์ต ออกมาหมด\r\n{inspectdf} package\r\n\r\n\r\ndevtools::install_github(\"alastairrushworth/inspectdf\")\r\nlibrary(inspectdf)\r\n\r\n\r\n\r\nแพกเกจนี้ เพิ่งค้นพบ และ ทำออกมาได้ดีมากๆ ง่าย แบบคนขี้เกียจทำ\r\n\r\n\r\nstarwars %>% group_by(gender) %>% inspect_na()\r\n\r\n\r\n# A tibble: 39 x 4\r\n# Groups:   gender [3]\r\n   gender   col_name     cnt  pcnt\r\n   <chr>    <chr>      <int> <dbl>\r\n 1 feminine birth_year     9 52.9 \r\n 2 feminine mass           8 47.1 \r\n 3 feminine homeworld      2 11.8 \r\n 4 feminine height         1  5.88\r\n 5 feminine name           0  0   \r\n 6 feminine hair_color     0  0   \r\n 7 feminine skin_color     0  0   \r\n 8 feminine eye_color      0  0   \r\n 9 feminine sex            0  0   \r\n10 feminine species        0  0   \r\n# ... with 29 more rows\r\n\r\n\r\n\r\ntech %>%\r\n  group_by(year) %>%\r\n  inspect_cor() %>%\r\n  show_plot()\r\n\r\n\r\n\r\n\r\nน่าสนใจมากนะ โดยเฉพาะ ทำให้เราสามารถคัดเลือกตัวแปรว่าตัวแปรไหนที่เราควรสนใจไม่เชิงความสัมพันธ์ระหว่างตัวแปร\r\nและผมก็จะหามาเรื่อยๆ นะครับ แบบฉบับสำหรับคนขี้เกียจ\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-03-17T18:02:01+07:00",
    "input_file": "EDAinR.utf8.md"
  }
]
